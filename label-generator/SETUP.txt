# INSTRUCCIONES DE CONFIGURACIÓN Y USO

## Configuración Inicial

### 1. Configurar Supabase

1. Ir a https://supabase.com y crear una cuenta
2. Crear un nuevo proyecto
3. En el proyecto, ir a Settings > API
4. Copiar la URL del proyecto y la clave anónima
5. Ir a SQL Editor y ejecutar el contenido del archivo `database/schema.sql`

### 2. Variables de Entorno

Actualizar el archivo `.env.local`:

```env
NEXT_PUBLIC_SUPABASE_URL=https://tu-proyecto.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=tu_clave_anonima_aqui
SUPABASE_SERVICE_ROLE_KEY=tu_service_role_key_aqui
```

### 3. Instalación y Ejecución

```bash
npm install
npm run dev
```

## Deployment en Vercel

1. Conectar el repositorio a Vercel
2. Configurar las variables de entorno en Vercel
3. Deploy automático

## Uso del Sistema

### Flujo Principal

1. Seleccionar tipo de etiqueta
2. Ingresar cantidad (1-1000)
3. Generar códigos
4. Vista previa (opcional)
5. Imprimir

### Tipos de Etiquetas Soportados

- PatchCord EFO (PC-XXXXXX)
- PatchCord RIMPORT (PCR-XXXXXX)
- PatchCord COENTEL (PCC-XXXXXX)
- PatchCord Duplex EFO (PCD-XXXXXX)
- PatchCord Duplex RIMPORT (PCDR-XXXXXX)
- PatchCord Duplex COENTEL (PCDC-XXXXXX)
- Pigtail EFO (PT-XXXXXX)
- Pigtail RIMPORT (PTR-XXXXXX)
- Pigtail COENTEL (PTC-XXXXXX)
- Bobina (BB-XXXXXX)

### Características

- Códigos secuenciales automáticos
- Impresión térmica directa (80x60mm)
- Tracking de lotes en base de datos
- Preview antes de imprimir
- Sistema sin diálogos de impresión

## API Endpoints

### POST /api/labels/generate
Genera un lote de etiquetas

```json
{
  "type": "PatchCord",
  "quantity": 50
}
```

### POST /api/labels/print
Marca un lote como impreso

```json
{
  "batchId": "uuid-del-lote"
}
```

## Base de Datos

### Tabla: labels
- id: bigint (autoincrement)
- code: text (único)
- type: text
- batch: uuid (referencia a label_batches)
- created_at: timestamp
- printed: boolean
- printed_at: timestamp
- printed_by: text

### Tabla: label_batches
- id: uuid (primary key)
- type: text
- quantity: integer
- codes: text[]
- created_at: timestamp
- printed: boolean

## Troubleshooting

### Error: Invalid supabaseUrl
- Verificar que las variables de entorno estén configuradas
- Reiniciar el servidor de desarrollo

### Problemas de Impresión
- Verificar que la impresora térmica esté conectada
- Comprobar que el navegador permita imprimir

### Códigos Duplicados
- El sistema previene automáticamente duplicados
- Los códigos son secuenciales por tipo